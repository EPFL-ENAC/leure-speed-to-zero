{"remainingRequest":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/babel-loader/lib/index.js!/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/src/components/tabs/emissions/GHGSources.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/src/components/tabs/emissions/GHGSources.vue","mtime":1707210098278},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/babel-loader/lib/index.js","mtime":1707234519797},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/vue-loader/lib/index.js","mtime":1707234682968}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SideBarChart from \"../../../charts/SideBarChart.vue\";\nexport default {\n  name: 'GHGSources',\n  props: ['subtab', 'outputs', 'chartDefinitions', 'appState'],\n  components: {\n    SideBarChart: SideBarChart\n  },\n  data: function data() {\n    return {\n      chartsData: {},\n      currentChart: undefined,\n      // id\n      isToplevel: undefined\n    };\n  },\n  methods: {\n    goBack: function goBack() {\n      //setting state var that determines animation direction\n      if (this.chartChain.length > 1) {\n        this.chartChain.pop();\n        this.currentChart = this.chartChain[this.chartChain.length - 1];\n        if (this.chartChain.length > 1) {\n          this.isToplevel = false;\n        } else {\n          this.isToplevel = true;\n        }\n      }\n    },\n    goDeeper: function goDeeper(target) {\n      this.chartChain.push(target); //strings only! not using references here\n      this.currentChart = target;\n      this.isToplevel = false;\n    },\n    buildData: function buildData() {\n      var _this = this;\n      var currChart = this.chartDefinitions[this.subtab.charts[0]];\n      var country = 'EU';\n      this.chartsData = {};\n      Object.keys(currChart.structure).forEach(function (chartkey) {\n        var title;\n        if (currChart.structure[chartkey].title) {\n          title = currChart.structure.title;\n        } else if (_this.outputs[chartkey] && _this.outputs[chartkey].title) {\n          title = _this.outputs[chartkey].title;\n        } else if (_this.outputs[chartkey] && !_this.outputs[chartkey].title) {\n          title = _this.outputs[chartkey];\n        }\n        var series = [];\n        currChart.structure[chartkey].series.forEach(function (outputId) {\n          if (outputId && _this.outputs[outputId] && _this.outputs[outputId].data && _this.outputs[outputId].data[country]) {\n            var data = _this.outputs[outputId].data[country];\n            series.push({\n              name: _this.outputs[outputId] && _this.outputs[outputId].title ? _this.outputs[outputId].title : outputId,\n              id: outputId,\n              value: Math.round(data[data.length - 1])\n            });\n          }\n        });\n        _this.chartsData[chartkey] = {\n          title: title,\n          unit: currChart.unit,\n          series: series\n        };\n      });\n      this.currentChart = this.currentChart ? this.currentChart : \"root\";\n      this.chartChain = this.chartChain ? this.chartChain : [this.currentChart];\n      this.isToplevel = this.chartChain.length < 2;\n\n      //check for parts\n      Object.keys(this.chartsData).forEach(function (seriesKey) {\n        _this.chartsData[seriesKey].series.forEach(function (entry) {\n          if (_this.chartsData[entry.id]) {\n            entry.hasParts = true;\n          }\n        });\n      });\n    }\n  },\n  watch: {\n    'appState.lastAPIResponse': function appStateLastAPIResponse() {\n      //console.log('lastAPIResponse changed');\n      this.buildData();\n    }\n  },\n  created: function created() {\n    this.buildData();\n  }\n};",{"version":3,"sources":["GHGSources.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"subtab-content\">\n\n    <transition name=\"modal-fade\" mode=\"out-in\">\n      <SideBarChart :key=\"currentChart\" class=\"emissions-chart\"\n        :chart-data=\"chartsData[currentChart]\"\n        :go-back=\"isToplevel ? null: goBack\"\n        :go-deeper=\"goDeeper\"\n      />\n    </transition>\n\n\n  </div>\n</template>\n\n<script>\nimport SideBarChart from '../../../charts/SideBarChart.vue';\n\nexport default {\n  name: 'GHGSources',\n  props: ['subtab','outputs', 'chartDefinitions', 'appState'],\n  components: {\n    SideBarChart\n  },\n  data() {\n    return {\n      chartsData: {},\n      currentChart: undefined, // id\n      isToplevel: undefined\n    }\n  },\n  methods: {\n    goBack() {\n      //setting state var that determines animation direction\n      if(this.chartChain.length > 1) {\n        this.chartChain.pop();\n        this.currentChart = this.chartChain[this.chartChain.length-1];\n        if(this.chartChain.length > 1) {\n          this.isToplevel = false;\n        } else {\n          this.isToplevel = true;\n        }\n      }\n    },\n    goDeeper(target) {\n      this.chartChain.push(target)  //strings only! not using references here\n      this.currentChart = target;\n      this.isToplevel = false;\n    },\n    buildData() {\n      let currChart = this.chartDefinitions[this.subtab.charts[0]];\n      let country = 'EU';\n\n      this.chartsData = {};\n      Object.keys(currChart.structure).forEach( (chartkey)=> {\n        let title;\n        if(currChart.structure[chartkey].title) {\n          title = currChart.structure.title\n        }\n        else if (this.outputs[chartkey] && this.outputs[chartkey].title) {\n          title = this.outputs[chartkey].title;\n        }\n        else if (this.outputs[chartkey] && !this.outputs[chartkey].title) {\n          title = this.outputs[chartkey]\n        }\n\n\n        let series = [];\n        currChart.structure[chartkey].series.forEach((outputId) => {\n          if(outputId && this.outputs[outputId] && this.outputs[outputId].data && this.outputs[outputId].data[country]) {\n            let data = this.outputs[outputId].data[country];\n            series.push({\n              name: (this.outputs[outputId] && this.outputs[outputId].title) ? this.outputs[outputId].title : outputId,\n              id: outputId,\n              value: Math.round(data[data.length-1])\n            })\n          }\n        });\n\n        this.chartsData[chartkey] = {\n          title: title,\n          unit: currChart.unit,\n          series: series\n        }\n      });\n\n      this.currentChart = this.currentChart ? this.currentChart : \"root\";\n      this.chartChain = this.chartChain ? this.chartChain : [this.currentChart];\n      this.isToplevel = this.chartChain.length < 2;\n\n      //check for parts\n      Object.keys(this.chartsData).forEach((seriesKey) => {\n        this.chartsData[seriesKey].series.forEach((entry) => {\n          if(this.chartsData[entry.id]) {\n            entry.hasParts = true;\n          }\n        });\n      });\n\n    }\n  },\n  watch: {\n    'appState.lastAPIResponse': function() {\n      //console.log('lastAPIResponse changed');\n      this.buildData();\n    }\n  },\n  created() {\n    this.buildData();\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n.emissions-chart {\n  max-width: 450px;\n  margin-left: auto;\n  margin-right: auto;\n  padding: 20px 100px;\n  border: 1px solid darkgrey;\n}\n</style>\n"],"sourceRoot":"src/components/tabs/emissions"}]}