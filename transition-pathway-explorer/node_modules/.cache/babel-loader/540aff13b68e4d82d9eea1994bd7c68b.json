{"remainingRequest":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/babel-loader/lib/index.js!/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/src/components/tabs/water/WaterMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/src/components/tabs/water/WaterMap.vue","mtime":1707210098279},{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/babel-loader/lib/index.js","mtime":1707234519797},{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/vue-loader/lib/index.js","mtime":1707234519986}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'WaterMap',\n  props: ['appState', 'title', 'data', 'ranges'],\n  computed: {\n    lastRangeIndex: function lastRangeIndex() {\n      return this.ranges.length - 1;\n    }\n  },\n  methods: {\n    getRegions: function getRegions() {\n      var _this = this;\n\n      if (!this.data) {\n        return;\n      }\n\n      var svgDoc = this.$refs.map.contentDocument;\n      Object.keys(this.data).forEach(function (countryCode) {\n        var elem = svgDoc.getElementById(_this.countryCodeMap[countryCode]);\n\n        if (elem) {\n          _this.regions[countryCode] = {};\n          _this.regions[countryCode].elem = elem;\n          _this.regions[countryCode].elem.style.transition = \"fill 1s ease\";\n          var titleElem = elem.getElementsByTagName('title'); //returns a HTMLCollection\n\n          if (titleElem && titleElem.length) {\n            _this.regions[countryCode].title = titleElem.item(0).innerHTML;\n          }\n        }\n      });\n      this.setValues();\n    },\n    setValues: function setValues() {\n      var _this2 = this;\n\n      // needs to be separate from getRegions, because on update only the values change, the references to elems should remain\n      Object.keys(this.regions).forEach(function (countryCode) {\n        var valueSeries;\n\n        if (_this2.data) {\n          valueSeries = _this2.data[countryCode];\n        }\n\n        var value;\n\n        if (valueSeries) {\n          // last year of data by default\n          value = valueSeries[valueSeries.length - 1];\n        }\n\n        if (typeof value !== 'undefined') {\n          _this2.regions[countryCode].value = value;\n\n          var rangeInd = _this2.getRangeIndex(value);\n\n          _this2.regions[countryCode].rangeIndex = rangeInd;\n          _this2.regions[countryCode].elem.style.fill = _this2.ranges[rangeInd].fillColor;\n        }\n      });\n    },\n    getRangeIndex: function getRangeIndex(value) {\n      var _this3 = this;\n\n      var rangeIndex = 0;\n      var dummyFrom = -Infinity;\n      this.ranges.some(function (range, index) {\n        // lower and upper boundaries are set if missing\n        // can be missing for first or last range-entry\n        var lower = typeof range.from !== 'undefined' ? range.from : dummyFrom;\n        var upper = typeof range.to !== 'undefined' ? range.to : Infinity;\n\n        if (index === _this3.lastRangeIndex && value >= lower) {\n          rangeIndex = index;\n          return true;\n        }\n\n        if (value >= lower && value < upper) {\n          rangeIndex = index;\n          return true;\n        } else {\n          // keep looking\n          dummyFrom = upper;\n          return false;\n        }\n      });\n      return rangeIndex;\n    }\n  },\n  created: function created() {\n    this.regions = {};\n    this.countryCodeMap = {\n      \"AT_whole-country\": \"AT\",\n      \"BE_whole-country\": \"BE\",\n      \"BG_whole-country\": \"BG\",\n      \"CH_whole-country\": \"CH\",\n      \"CY_whole-country\": \"CY\",\n      \"CZ_whole-country\": \"CZ\",\n      \"DE_Danube\": \"DE-south\",\n      \"DE_ElbeOder\": \"DE-east\",\n      \"DE_Rhine\": \"DE-west\",\n      \"DK_whole-country\": \"DK\",\n      \"EE_whole-country\": \"EE\",\n      \"EL_N\": \"GR-west\",\n      \"EL_S\": \"GR-east\",\n      \"ES_Ebro\": \"ES-east\",\n      \"ES_NW\": \"ES-north\",\n      \"ES_S\": \"ES-south\",\n      \"FI_whole-country\": \"FI\",\n      \"FR_N\": \"FR-north\",\n      \"FR_S\": \"FR-south\",\n      \"HR_whole-country\": \"HR\",\n      \"HU_whole-country\": \"HU\",\n      \"IE_whole-country\": \"IE\",\n      \"IT_M\": \"IT-middle\",\n      \"IT_N\": \"IT-north\",\n      \"IT_S\": \"IT-south\",\n      \"LT_whole-country\": \"LT\",\n      \"LU_whole-country\": \"LU\",\n      \"LV_whole-country\": \"LV\",\n      \"MT_whole-country\": \"MT\",\n      \"NL_whole-country\": \"NL\",\n      \"PL_whole-country\": \"PL\",\n      \"PT_whole-country\": \"PT\",\n      \"RO_whole-country\": \"RO\",\n      \"SE_whole-country\": \"SE\",\n      \"SI_whole-country\": \"SI\",\n      \"SK_whole-country\": \"SK\",\n      \"UK_United Kingdom-M\": \"UK-middle\",\n      \"UK_United Kingdom-N\": \"UK-north\",\n      \"UK_United Kingdom-S\": \"UK-south\"\n    };\n  },\n  watch: {\n    data: function data() {\n      // Don't use a watch on 'appState.lastAPIResponse',\n      // because that watch is used in the parent component already and might fire here first.\n      // Use a watch on the data prop instead.\n      // Watch on data doesn't need to be deep, because the whole object gets replaced.\n      this.setValues();\n    }\n  }\n};",{"version":3,"sources":["WaterMap.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"water-map\">\n    <div class=\"water-map-title\">{{title}}</div>\n    <object type=\"image/svg+xml\" data=\"/maps/water-map2.svg\" v-on:load=\"getRegions\" ref=\"map\"></object>\n\n    <div class=\"water-map-legend\">\n      <div v-for=\"range in ranges\" class=\"water-map-range\" :key=\"range.title\">\n        <div class=\"range-color\" v-bind:style=\"{'background-color': range.fillColor}\"></div>\n        <div class=\"range-limits\">\n          <div class=\"range-limit-left\">\n            <div v-if=\"range.from !== undefined\">{{range.from}}</div>\n          </div>\n          <div class=\"range-limit-middle\">\n            <div v-if=\"range.delimiter\">{{range.delimiter}}</div>\n            <div v-else>-</div>\n          </div>\n          <div class=\"range-limit-right\">\n            <div v-if=\"range.to !== undefined\">{{range.to}}</div>\n          </div>\n        </div>\n        <div class=\"range-title\">{{range.title}}</div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'WaterMap',\n  props: ['appState', 'title', 'data', 'ranges'],\n  computed: {\n    lastRangeIndex() {\n      return this.ranges.length-1;\n    }\n  },\n  methods: {\n    getRegions() {\n\n      if(!this.data) {\n        return;\n      }\n\n      let svgDoc = this.$refs.map.contentDocument;\n\n      Object.keys(this.data).forEach((countryCode) => {\n\n        let elem = svgDoc.getElementById(this.countryCodeMap[countryCode]);\n\n        if(elem) {\n          this.regions[countryCode] = {};\n          this.regions[countryCode].elem = elem;\n          this.regions[countryCode].elem.style.transition = \"fill 1s ease\";\n          let titleElem = elem.getElementsByTagName('title'); //returns a HTMLCollection\n          if(titleElem && titleElem.length) {\n            this.regions[countryCode].title = titleElem.item(0).innerHTML;\n          }\n        }\n      });\n      this.setValues();\n    },\n    setValues() {\n      // needs to be separate from getRegions, because on update only the values change, the references to elems should remain\n\n      Object.keys(this.regions).forEach((countryCode) => {\n\n        let valueSeries;\n        if(this.data) {\n          valueSeries = this.data[countryCode];\n        }\n\n        let value;\n        if(valueSeries) {\n          // last year of data by default\n          value = valueSeries[valueSeries.length-1];\n        }\n\n        if(typeof value !== 'undefined') {\n          this.regions[countryCode].value = value;\n          let rangeInd = this.getRangeIndex(value);\n          this.regions[countryCode].rangeIndex = rangeInd;\n          this.regions[countryCode].elem.style.fill = this.ranges[rangeInd].fillColor;\n        }\n      });\n    },\n    getRangeIndex(value) {\n      let rangeIndex = 0;\n      let dummyFrom = -Infinity;\n\n      this.ranges.some((range, index) => {\n\n        // lower and upper boundaries are set if missing\n        // can be missing for first or last range-entry\n        let lower = typeof range.from !== 'undefined' ? range.from : dummyFrom;\n        let upper = typeof range.to !== 'undefined' ? range.to : Infinity;\n\n        if(index === this.lastRangeIndex && value >= lower) {\n          rangeIndex = index;\n          return true;\n        }\n        if(value >= lower && value < upper) {\n          rangeIndex = index;\n          return true;\n        } else {\n          // keep looking\n          dummyFrom = upper;\n          return false;\n        }\n\n      });\n\n      return rangeIndex;\n    }\n  },\n  created() {\n\n    this.regions = {};\n\n    this.countryCodeMap = {\n      \"AT_whole-country\": \"AT\",\n      \"BE_whole-country\": \"BE\",\n      \"BG_whole-country\": \"BG\",\n      \"CH_whole-country\": \"CH\",\n      \"CY_whole-country\": \"CY\",\n      \"CZ_whole-country\": \"CZ\",\n      \"DE_Danube\": \"DE-south\",\n      \"DE_ElbeOder\": \"DE-east\",\n      \"DE_Rhine\": \"DE-west\",\n      \"DK_whole-country\": \"DK\",\n      \"EE_whole-country\": \"EE\",\n      \"EL_N\": \"GR-west\",\n      \"EL_S\": \"GR-east\",\n      \"ES_Ebro\": \"ES-east\",\n      \"ES_NW\": \"ES-north\",\n      \"ES_S\": \"ES-south\",\n      \"FI_whole-country\": \"FI\",\n      \"FR_N\": \"FR-north\",\n      \"FR_S\": \"FR-south\",\n      \"HR_whole-country\": \"HR\",\n      \"HU_whole-country\": \"HU\",\n      \"IE_whole-country\": \"IE\",\n      \"IT_M\": \"IT-middle\",\n      \"IT_N\": \"IT-north\",\n      \"IT_S\": \"IT-south\",\n      \"LT_whole-country\": \"LT\",\n      \"LU_whole-country\": \"LU\",\n      \"LV_whole-country\": \"LV\",\n      \"MT_whole-country\": \"MT\",\n      \"NL_whole-country\": \"NL\",\n      \"PL_whole-country\": \"PL\",\n      \"PT_whole-country\": \"PT\",\n      \"RO_whole-country\": \"RO\",\n      \"SE_whole-country\": \"SE\",\n      \"SI_whole-country\": \"SI\",\n      \"SK_whole-country\": \"SK\",\n      \"UK_United Kingdom-M\": \"UK-middle\",\n      \"UK_United Kingdom-N\": \"UK-north\",\n      \"UK_United Kingdom-S\": \"UK-south\"\n    };\n  },\n  watch: {\n    data: function() {\n      // Don't use a watch on 'appState.lastAPIResponse',\n      // because that watch is used in the parent component already and might fire here first.\n      // Use a watch on the data prop instead.\n      // Watch on data doesn't need to be deep, because the whole object gets replaced.\n      this.setValues();\n    }\n  }\n}\n</script>\n\n<style>\n#water-maps-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  margin-right: 20px;\n}\n\n.water-map {\n  min-width: 400px;\n  flex-grow: 1;\n  border: 1px solid lightgrey;\n  position: relative;\n  margin: 10px 25px;\n}\n.water-map-title {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  background-color: white;\n  padding: 5px 8px;\n  font-weight: bold;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.water-map object {\n  width: 100%;\n}\n.water-map svg path:hover {\n  opacity: 0.5;\n}\n\n.water-map-legend {\n  margin: 10px 25px;\n}\n.water-map-range {\n  display: flex;\n  align-items: center;\n}\n.range-color {\n  width: 25px;\n  height: 25px;\n}\n.range-limits {\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n  font-weight: bold;\n}\n.range-limit-left {\n  flex: none;\n  width: 30px;\n  text-align: right;\n}\n.range-limit-middle {\n  flex: none;\n  width: 30px;\n  text-align: center;\n}\n.range-limit-right {\n  flex: none;\n  width: 30px;\n  text-align: left;\n}\n.range-title {\n  margin-left: 10px;\n}\n\n</style>\n"],"sourceRoot":"src/components/tabs/water"}]}