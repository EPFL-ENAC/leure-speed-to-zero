{"remainingRequest":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/babel-loader/lib/index.js!/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/src/components/SingleLeverNum.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/src/components/SingleLeverNum.vue","mtime":1707210098269},{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/babel-loader/lib/index.js","mtime":1707234519797},{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/EUcalc/paris-tool/transition-pathway-explorer/node_modules/vue-loader/lib/index.js","mtime":1707234519986}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as dataService from \"../dataService.js\";\nimport * as inputsService from \"../inputsService.js\";\nexport default {\n  name: 'SingleLeverNum',\n  props: ['leverid', 'range', 'value', 'country', 'tooltipVisible', 'activateTooltip', 'deactivateTooltip', 'appState', 'deactivated'],\n  data: function data() {\n    return {\n      tooltipText: '',\n      tooltipIndex: undefined,\n      buttonFromEmptyToFilled: false\n    };\n  },\n  created: function created() {\n    this.timerId = undefined;\n  },\n  computed: {\n    partialWidth: function partialWidth() {\n      var val = (this.value % 1).toFixed(1) * 100;\n      return val === 0 ? 100 : val;\n    }\n  },\n  methods: {\n    setIntValues: function setIntValues(step) {\n      if (this.country.values[this.leverid] === step) {\n        return;\n      } else {\n        inputsService.setValue(this.country, this.leverid, step); //Desktop only\n\n        if (!this.appState.isMobile) {\n          dataService.rewriteURL(dataService.updateURLParams());\n          dataService.debouncedFetch();\n        } // Mobile only\n\n\n        if (this.appState.isMobile) {\n          // send availability request\n          dataService.availabilityRequest();\n        }\n      }\n    },\n    stepClickFunc: function stepClickFunc(step) {\n      if (this.deactivated) {\n        return;\n      }\n\n      if (this.appState.noDecimalLevers) {\n        this.setIntValues(step);\n        return;\n      }\n\n      if (Math.ceil(this.value) !== step) {\n        if (this.country.values[this.leverid] !== step) {\n          inputsService.setValue(this.country, this.leverid, step); //Desktop only\n\n          if (!this.appState.isMobile) {\n            dataService.rewriteURL(dataService.updateURLParams());\n            dataService.debouncedFetch();\n          } // Mobile only\n\n\n          if (this.appState.isMobile) {\n            // send availability request\n            dataService.availabilityRequest();\n          }\n        }\n      } else {\n        var val = Math.round((this.value - 0.1) * 10) / 10;\n        val = val <= 1 ? 1 : val;\n\n        if (this.country.values[this.leverid] !== val) {\n          inputsService.setValue(this.country, this.leverid, val); //Desktop only\n\n          if (!this.appState.isMobile) {\n            dataService.rewriteURL(dataService.updateURLParams());\n            dataService.debouncedFetch();\n          } // Mobile only\n\n\n          if (this.appState.isMobile) {\n            // send availability request\n            dataService.availabilityRequest();\n          }\n        }\n      }\n    },\n    setTooltip: function setTooltip(ind) {\n      var _this = this;\n\n      var setTooltipInfo = function setTooltipInfo() {\n        var tooltipData;\n\n        if (inputsService.tooltips[_this.leverid] && inputsService.tooltips[_this.leverid][_this.country.id]) {\n          tooltipData = inputsService.tooltips[_this.leverid][_this.country.id];\n        } else {\n          tooltipData = [];\n        }\n\n        if (tooltipData[ind]) {\n          _this.tooltipText = tooltipData[ind].trim();\n          _this.tooltipIndex = ind;\n        }\n      };\n\n      if (this.tooltipVisible) {\n        setTooltipInfo();\n      } else {\n        this.activateTooltip(this.leverid, setTooltipInfo);\n      }\n    }\n  },\n  watch: {\n    value: function value(newVal, oldVal) {\n      var _this2 = this;\n\n      //console.log('value watch ', oldVal, newVal, Math.floor(oldVal), Math.floor(newVal));\n      if (Math.floor(newVal) > Math.floor(oldVal)) {\n        // triggers for oldVal = 1.5, newVal = 2.1\n        // doesn't trigger for oldVal = 1.5, newVal = 1.9\n        this.buttonFromEmptyToFilled = true; //nextTick() is not enough. To make sure the change is visible, use window.requestAnimationFrame()\n\n        window.requestAnimationFrame(function () {\n          window.requestAnimationFrame(function () {\n            _this2.buttonFromEmptyToFilled = false;\n          });\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["SingleLeverNum.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"single-lever\" :class=\"{'deactivated': deactivated}\">\n\n    <div v-for=\"(step, index) in range\" class=\"single-lever-step\" :key=\"step\" v-on:mouseenter=\"setTooltip(index)\">\n\n      <div class=\"single-lever-step-button\"\n        :class=\"{\n          empty: Math.ceil(value) <= step,\n          filled: Math.ceil(value) > step,\n          notrans: buttonFromEmptyToFilled,\n        }\"\n        v-on:click=\"stepClickFunc(step)\"\n      >\n        <span v-if=\"(Math.ceil(value) === step)\"\n          class=\"single-lever-step-partial\" :style=\"{width: partialWidth + '%'}\"\n        >\n        </span>\n      </div>\n    </div>\n\n    <div v-if=\"!appState.isMobile\" class=\"single-lever-value\"><span>{{value}}</span></div>\n\n    <div class=\"single-lever-tooltip\" :class=\"{'visible': tooltipVisible && tooltipText}\">\n      <div>Ambition Level {{range[tooltipIndex]}}:</div>\n      <div>{{tooltipText}}</div>\n    </div>\n    <div class=\"single-lever-step-connector\" :class=\"{'visible': tooltipVisible && tooltipText}\"\n\n      :style=\"{left: (23*(tooltipIndex+1))-13-10+'px'}\"\n    >\n      <!--\n        left: 23*(tooltipIndex+1)-13-10\n          23: width of single-lever-step including margin\n          13: more or less the half of that width (the x-center)\n          10: half the width of the single-lever-step-connector\n\n        can't be inside .single-lever-step, otherwise not over single-lever-tooltip and box-shadow not covered,\n        even if single-lever-tooltip is put above single-lever-step\n    -->\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport * as dataService from '../dataService.js';\nimport * as inputsService from '../inputsService.js';\n\nexport default {\n  name: 'SingleLeverNum',\n  props: ['leverid', 'range', 'value', 'country', 'tooltipVisible', 'activateTooltip', 'deactivateTooltip', 'appState', 'deactivated'],\n  data() {\n    return {\n      tooltipText: '',\n      tooltipIndex: undefined,\n      buttonFromEmptyToFilled: false\n    }\n  },\n  created() {\n    this.timerId = undefined;\n  },\n  computed: {\n    partialWidth: function() {\n      let val = (this.value % 1).toFixed(1)*100;\n      return val === 0 ? 100 : val;\n    }\n  },\n  methods: {\n    setIntValues(step) {\n      if(this.country.values[this.leverid] === step) {\n        return;\n      } else {\n        inputsService.setValue(this.country, this.leverid, step);\n        //Desktop only\n        if(!this.appState.isMobile) {\n          dataService.rewriteURL(dataService.updateURLParams());\n          dataService.debouncedFetch();\n        }\n        // Mobile only\n        if(this.appState.isMobile) {\n          // send availability request\n          dataService.availabilityRequest();\n        }\n      }\n    },\n    stepClickFunc(step) {\n      if(this.deactivated) {\n        return;\n      }\n      if(this.appState.noDecimalLevers) {\n        this.setIntValues(step);\n        return;\n      }\n\n      if(Math.ceil(this.value) !== step) {\n        if(this.country.values[this.leverid] !== step) {\n          inputsService.setValue(this.country, this.leverid, step);\n          //Desktop only\n          if(!this.appState.isMobile) {\n            dataService.rewriteURL(dataService.updateURLParams());\n            dataService.debouncedFetch();\n          }\n\n          // Mobile only\n          if(this.appState.isMobile) {\n            // send availability request\n            dataService.availabilityRequest();\n          }\n        }\n      } else {\n        let val = Math.round( (this.value-0.1) * 10) / 10;\n        val = val <= 1 ? 1 : val;\n        if(this.country.values[this.leverid] !== val) {\n          inputsService.setValue(this.country, this.leverid, val);\n          //Desktop only\n          if(!this.appState.isMobile) {\n            dataService.rewriteURL(dataService.updateURLParams());\n            dataService.debouncedFetch();\n          }\n\n          // Mobile only\n          if(this.appState.isMobile) {\n            // send availability request\n            dataService.availabilityRequest();\n          }\n        }\n      }\n    },\n    setTooltip(ind) {\n\n      var setTooltipInfo = () => {\n        let tooltipData;\n        if(inputsService.tooltips[this.leverid] && inputsService.tooltips[this.leverid][this.country.id]) {\n          tooltipData = inputsService.tooltips[this.leverid][this.country.id];\n        } else {\n          tooltipData = [];\n        }\n        if(tooltipData[ind]) {\n          this.tooltipText = tooltipData[ind].trim();\n          this.tooltipIndex = ind;\n        }\n      };\n\n      if(this.tooltipVisible) {\n        setTooltipInfo();\n      } else {\n        this.activateTooltip(this.leverid, setTooltipInfo);\n      }\n    }\n  },\n  watch: {\n    value: function(newVal, oldVal) {\n      //console.log('value watch ', oldVal, newVal, Math.floor(oldVal), Math.floor(newVal));\n      if(Math.floor(newVal) > Math.floor(oldVal)) {\n        // triggers for oldVal = 1.5, newVal = 2.1\n        // doesn't trigger for oldVal = 1.5, newVal = 1.9\n\n        this.buttonFromEmptyToFilled = true;\n\n        //nextTick() is not enough. To make sure the change is visible, use window.requestAnimationFrame()\n        window.requestAnimationFrame(() => {\n          window.requestAnimationFrame(() => {\n            this.buttonFromEmptyToFilled = false;\n          });\n        });\n\n      }\n    }\n\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n.single-lever {\n  position: relative;\n  display: flex;\n  height: 22px;\n}\n.single-lever-step {\n  position: relative;\n  flex: none;\n  width: 22px;\n  height: 100%;\n  z-index: 2;\n}\n.single-lever-step-button {\n  height: 100%;\n  width: 100%;\n  cursor: pointer;\n  border: 1px solid #6d6e71;\n  background-color: #adaeb0;\n  box-sizing: border-box;\n  border-radius: 100%;\n}\n.deactivated .single-lever-step-button {\n  background-color: #dadada;\n  border-color: #b3b3b3;\n  cursor: default;\n}\n.single-lever-step-button.filled {\n  transition: all 0.2s ease;\n}\n.single-lever-step-button.filled.notrans {\n  transition: all 0s ease;\n}\n.single-lever:hover .single-lever-step-button.filled {\n  /*\n    deactivate hover transition when already hovering inside the lever field\n    only transition when leaving that field\n  */\n  transition-duration: 0s;\n}\n\n.single-lever-step-button.empty {\n  background-color: transparent !important;\n  border-color: #b0b0b0;\n}\n\n.single-lever-step-partial {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  height: 100%;\n  overflow: hidden;\n  z-index: 10;\n}\n.single-lever-step-partial::after {\n  content: '';\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 22px;\n  height: 22px;\n  border-radius: 100%;\n  background-color: #adaeb0;\n  border: 1px solid #6d6e71;\n  box-sizing: border-box;\n  transition: background-color 0.2s ease;\n}\n.deactivated .single-lever-step-partial::after {\n  border-color: #b3b3b3 !important;\n  background-color: #dadada;\n}\n.single-lever-value {\n  width: 24px;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 15px;\n  color: #27aae1;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n.single-lever:hover .single-lever-value {\n  /*leave transition for the .single-lever-value on hover,\n  unlike .single-lever-step-partial::after or .single-lever-step-button.filled*/\n  opacity: 1;\n}\n\n.single-lever:hover .single-lever-step-button.filled {\n  background-color: #27aae1;\n}\n\n.single-lever:hover .single-lever-step-partial::after {\n  background-color: #27aae1;\n  /*\n    deactivate hover transition when already hovering inside the lever field\n    only transition when leaving that field\n  */\n  transition-duration: 0s;\n}\n\n\n</style>\n"],"sourceRoot":"src/components"}]}