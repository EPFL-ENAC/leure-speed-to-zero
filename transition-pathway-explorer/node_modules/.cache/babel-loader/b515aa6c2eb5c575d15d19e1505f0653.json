{"remainingRequest":"/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/node_modules/babel-loader/lib/index.js!/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/src/components/tabs/water/WaterMap.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/src/components/tabs/water/WaterMap.vue","mtime":1707210098279},{"path":"/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/node_modules/babel-loader/lib/index.js","mtime":1707234519797},{"path":"/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/PathwayCalc/transition-pathway-explorer/node_modules/vue-loader/lib/index.js","mtime":1707234682968}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'WaterMap',\n  props: ['appState', 'title', 'data', 'ranges'],\n  computed: {\n    lastRangeIndex: function lastRangeIndex() {\n      return this.ranges.length - 1;\n    }\n  },\n  methods: {\n    getRegions: function getRegions() {\n      var _this = this;\n      if (!this.data) {\n        return;\n      }\n      var svgDoc = this.$refs.map.contentDocument;\n      Object.keys(this.data).forEach(function (countryCode) {\n        var elem = svgDoc.getElementById(_this.countryCodeMap[countryCode]);\n        if (elem) {\n          _this.regions[countryCode] = {};\n          _this.regions[countryCode].elem = elem;\n          _this.regions[countryCode].elem.style.transition = \"fill 1s ease\";\n          var titleElem = elem.getElementsByTagName('title'); //returns a HTMLCollection\n          if (titleElem && titleElem.length) {\n            _this.regions[countryCode].title = titleElem.item(0).innerHTML;\n          }\n        }\n      });\n      this.setValues();\n    },\n    setValues: function setValues() {\n      var _this2 = this;\n      // needs to be separate from getRegions, because on update only the values change, the references to elems should remain\n\n      Object.keys(this.regions).forEach(function (countryCode) {\n        var valueSeries;\n        if (_this2.data) {\n          valueSeries = _this2.data[countryCode];\n        }\n        var value;\n        if (valueSeries) {\n          // last year of data by default\n          value = valueSeries[valueSeries.length - 1];\n        }\n        if (typeof value !== 'undefined') {\n          _this2.regions[countryCode].value = value;\n          var rangeInd = _this2.getRangeIndex(value);\n          _this2.regions[countryCode].rangeIndex = rangeInd;\n          _this2.regions[countryCode].elem.style.fill = _this2.ranges[rangeInd].fillColor;\n        }\n      });\n    },\n    getRangeIndex: function getRangeIndex(value) {\n      var _this3 = this;\n      var rangeIndex = 0;\n      var dummyFrom = -Infinity;\n      this.ranges.some(function (range, index) {\n        // lower and upper boundaries are set if missing\n        // can be missing for first or last range-entry\n        var lower = typeof range.from !== 'undefined' ? range.from : dummyFrom;\n        var upper = typeof range.to !== 'undefined' ? range.to : Infinity;\n        if (index === _this3.lastRangeIndex && value >= lower) {\n          rangeIndex = index;\n          return true;\n        }\n        if (value >= lower && value < upper) {\n          rangeIndex = index;\n          return true;\n        } else {\n          // keep looking\n          dummyFrom = upper;\n          return false;\n        }\n      });\n      return rangeIndex;\n    }\n  },\n  created: function created() {\n    this.regions = {};\n    this.countryCodeMap = {\n      \"AT_whole-country\": \"AT\",\n      \"BE_whole-country\": \"BE\",\n      \"BG_whole-country\": \"BG\",\n      \"CH_whole-country\": \"CH\",\n      \"CY_whole-country\": \"CY\",\n      \"CZ_whole-country\": \"CZ\",\n      \"DE_Danube\": \"DE-south\",\n      \"DE_ElbeOder\": \"DE-east\",\n      \"DE_Rhine\": \"DE-west\",\n      \"DK_whole-country\": \"DK\",\n      \"EE_whole-country\": \"EE\",\n      \"EL_N\": \"GR-west\",\n      \"EL_S\": \"GR-east\",\n      \"ES_Ebro\": \"ES-east\",\n      \"ES_NW\": \"ES-north\",\n      \"ES_S\": \"ES-south\",\n      \"FI_whole-country\": \"FI\",\n      \"FR_N\": \"FR-north\",\n      \"FR_S\": \"FR-south\",\n      \"HR_whole-country\": \"HR\",\n      \"HU_whole-country\": \"HU\",\n      \"IE_whole-country\": \"IE\",\n      \"IT_M\": \"IT-middle\",\n      \"IT_N\": \"IT-north\",\n      \"IT_S\": \"IT-south\",\n      \"LT_whole-country\": \"LT\",\n      \"LU_whole-country\": \"LU\",\n      \"LV_whole-country\": \"LV\",\n      \"MT_whole-country\": \"MT\",\n      \"NL_whole-country\": \"NL\",\n      \"PL_whole-country\": \"PL\",\n      \"PT_whole-country\": \"PT\",\n      \"RO_whole-country\": \"RO\",\n      \"SE_whole-country\": \"SE\",\n      \"SI_whole-country\": \"SI\",\n      \"SK_whole-country\": \"SK\",\n      \"UK_United Kingdom-M\": \"UK-middle\",\n      \"UK_United Kingdom-N\": \"UK-north\",\n      \"UK_United Kingdom-S\": \"UK-south\"\n    };\n  },\n  watch: {\n    data: function data() {\n      // Don't use a watch on 'appState.lastAPIResponse',\n      // because that watch is used in the parent component already and might fire here first.\n      // Use a watch on the data prop instead.\n      // Watch on data doesn't need to be deep, because the whole object gets replaced.\n      this.setValues();\n    }\n  }\n};",{"version":3,"sources":["WaterMap.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"water-map\">\n    <div class=\"water-map-title\">{{title}}</div>\n    <object type=\"image/svg+xml\" data=\"/maps/water-map2.svg\" v-on:load=\"getRegions\" ref=\"map\"></object>\n\n    <div class=\"water-map-legend\">\n      <div v-for=\"range in ranges\" class=\"water-map-range\" :key=\"range.title\">\n        <div class=\"range-color\" v-bind:style=\"{'background-color': range.fillColor}\"></div>\n        <div class=\"range-limits\">\n          <div class=\"range-limit-left\">\n            <div v-if=\"range.from !== undefined\">{{range.from}}</div>\n          </div>\n          <div class=\"range-limit-middle\">\n            <div v-if=\"range.delimiter\">{{range.delimiter}}</div>\n            <div v-else>-</div>\n          </div>\n          <div class=\"range-limit-right\">\n            <div v-if=\"range.to !== undefined\">{{range.to}}</div>\n          </div>\n        </div>\n        <div class=\"range-title\">{{range.title}}</div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'WaterMap',\n  props: ['appState', 'title', 'data', 'ranges'],\n  computed: {\n    lastRangeIndex() {\n      return this.ranges.length-1;\n    }\n  },\n  methods: {\n    getRegions() {\n\n      if(!this.data) {\n        return;\n      }\n\n      let svgDoc = this.$refs.map.contentDocument;\n\n      Object.keys(this.data).forEach((countryCode) => {\n\n        let elem = svgDoc.getElementById(this.countryCodeMap[countryCode]);\n\n        if(elem) {\n          this.regions[countryCode] = {};\n          this.regions[countryCode].elem = elem;\n          this.regions[countryCode].elem.style.transition = \"fill 1s ease\";\n          let titleElem = elem.getElementsByTagName('title'); //returns a HTMLCollection\n          if(titleElem && titleElem.length) {\n            this.regions[countryCode].title = titleElem.item(0).innerHTML;\n          }\n        }\n      });\n      this.setValues();\n    },\n    setValues() {\n      // needs to be separate from getRegions, because on update only the values change, the references to elems should remain\n\n      Object.keys(this.regions).forEach((countryCode) => {\n\n        let valueSeries;\n        if(this.data) {\n          valueSeries = this.data[countryCode];\n        }\n\n        let value;\n        if(valueSeries) {\n          // last year of data by default\n          value = valueSeries[valueSeries.length-1];\n        }\n\n        if(typeof value !== 'undefined') {\n          this.regions[countryCode].value = value;\n          let rangeInd = this.getRangeIndex(value);\n          this.regions[countryCode].rangeIndex = rangeInd;\n          this.regions[countryCode].elem.style.fill = this.ranges[rangeInd].fillColor;\n        }\n      });\n    },\n    getRangeIndex(value) {\n      let rangeIndex = 0;\n      let dummyFrom = -Infinity;\n\n      this.ranges.some((range, index) => {\n\n        // lower and upper boundaries are set if missing\n        // can be missing for first or last range-entry\n        let lower = typeof range.from !== 'undefined' ? range.from : dummyFrom;\n        let upper = typeof range.to !== 'undefined' ? range.to : Infinity;\n\n        if(index === this.lastRangeIndex && value >= lower) {\n          rangeIndex = index;\n          return true;\n        }\n        if(value >= lower && value < upper) {\n          rangeIndex = index;\n          return true;\n        } else {\n          // keep looking\n          dummyFrom = upper;\n          return false;\n        }\n\n      });\n\n      return rangeIndex;\n    }\n  },\n  created() {\n\n    this.regions = {};\n\n    this.countryCodeMap = {\n      \"AT_whole-country\": \"AT\",\n      \"BE_whole-country\": \"BE\",\n      \"BG_whole-country\": \"BG\",\n      \"CH_whole-country\": \"CH\",\n      \"CY_whole-country\": \"CY\",\n      \"CZ_whole-country\": \"CZ\",\n      \"DE_Danube\": \"DE-south\",\n      \"DE_ElbeOder\": \"DE-east\",\n      \"DE_Rhine\": \"DE-west\",\n      \"DK_whole-country\": \"DK\",\n      \"EE_whole-country\": \"EE\",\n      \"EL_N\": \"GR-west\",\n      \"EL_S\": \"GR-east\",\n      \"ES_Ebro\": \"ES-east\",\n      \"ES_NW\": \"ES-north\",\n      \"ES_S\": \"ES-south\",\n      \"FI_whole-country\": \"FI\",\n      \"FR_N\": \"FR-north\",\n      \"FR_S\": \"FR-south\",\n      \"HR_whole-country\": \"HR\",\n      \"HU_whole-country\": \"HU\",\n      \"IE_whole-country\": \"IE\",\n      \"IT_M\": \"IT-middle\",\n      \"IT_N\": \"IT-north\",\n      \"IT_S\": \"IT-south\",\n      \"LT_whole-country\": \"LT\",\n      \"LU_whole-country\": \"LU\",\n      \"LV_whole-country\": \"LV\",\n      \"MT_whole-country\": \"MT\",\n      \"NL_whole-country\": \"NL\",\n      \"PL_whole-country\": \"PL\",\n      \"PT_whole-country\": \"PT\",\n      \"RO_whole-country\": \"RO\",\n      \"SE_whole-country\": \"SE\",\n      \"SI_whole-country\": \"SI\",\n      \"SK_whole-country\": \"SK\",\n      \"UK_United Kingdom-M\": \"UK-middle\",\n      \"UK_United Kingdom-N\": \"UK-north\",\n      \"UK_United Kingdom-S\": \"UK-south\"\n    };\n  },\n  watch: {\n    data: function() {\n      // Don't use a watch on 'appState.lastAPIResponse',\n      // because that watch is used in the parent component already and might fire here first.\n      // Use a watch on the data prop instead.\n      // Watch on data doesn't need to be deep, because the whole object gets replaced.\n      this.setValues();\n    }\n  }\n}\n</script>\n\n<style>\n#water-maps-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  margin-right: 20px;\n}\n\n.water-map {\n  min-width: 400px;\n  flex-grow: 1;\n  border: 1px solid lightgrey;\n  position: relative;\n  margin: 10px 25px;\n}\n.water-map-title {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  background-color: white;\n  padding: 5px 8px;\n  font-weight: bold;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.water-map object {\n  width: 100%;\n}\n.water-map svg path:hover {\n  opacity: 0.5;\n}\n\n.water-map-legend {\n  margin: 10px 25px;\n}\n.water-map-range {\n  display: flex;\n  align-items: center;\n}\n.range-color {\n  width: 25px;\n  height: 25px;\n}\n.range-limits {\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n  font-weight: bold;\n}\n.range-limit-left {\n  flex: none;\n  width: 30px;\n  text-align: right;\n}\n.range-limit-middle {\n  flex: none;\n  width: 30px;\n  text-align: center;\n}\n.range-limit-right {\n  flex: none;\n  width: 30px;\n  text-align: left;\n}\n.range-title {\n  margin-left: 10px;\n}\n\n</style>\n"],"sourceRoot":"src/components/tabs/water"}]}