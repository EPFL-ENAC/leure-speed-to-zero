{"remainingRequest":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/src/components/EmissionsBarMobile.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/src/components/EmissionsBarMobile.vue","mtime":1707210098268},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/babel-loader/lib/index.js","mtime":1707234519797},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/vue-loader/lib/index.js","mtime":1707234682968}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as outputsService from '../outputsService.js';\nimport {BudgetShares, LimitGHG, Produced2018} from '../config/targetData.js';\n\nexport default {\n  name: 'EmissionsBarMobile',\n  props: ['appState'],\n  components: {\n  },\n  data() {\n    return {\n      emissions2050: undefined\n    }\n  },\n  created() {\n    this.limitGHG = LimitGHG;\n    this.produced2018 = Produced2018;\n    this.getEmissions2050();\n  },\n  methods: {\n    toggleBudgetView() {\n      this.$refs.budgetToggle.click();\n    },\n    getEmissions2050() {\n      // component is mounted before API response gets in\n\n      let cumEmissions = outputsService.outputs[\"clt_cum-emissions-CO2e[Mt]\"];\n\n      if(cumEmissions && cumEmissions.data && cumEmissions.data['EU']) {\n        let len = cumEmissions.data['EU'].length;\n        this.emissions2050 = cumEmissions.data['EU'][len-1]/1000;\n      }\n    }\n  },\n  computed: {\n    euBudget() {\n      return BudgetShares[this.appState.budgetFairness].shares['EU28+1'][this.appState.budgetTemperature.toFixed(1)];\n    },\n    linkaddress() {\n      if(this.appState.mode === 'target') {\n        return this.appState.mainScreenRouteString\n      }\n      if(this.appState.mode === 'main') {\n        return '/budget';\n      }\n      // default, just to be safe\n      return '/';\n    }\n  },\n  watch: {\n    'appState.lastAPIResponse': function() {\n       this.getEmissions2050();\n     }\n  }\n}\n",{"version":3,"sources":["EmissionsBarMobile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EmissionsBarMobile.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"bar-chart-mobile\"\n  >\n    <div id=\"gauge-mobile\">\n\n      <div id=\"gauge-fill-mobile\"\n        :style=\"{\n          transform: 'scaleX('+(appState.mode==='target' ? euBudget/limitGHG : emissions2050/limitGHG)+')'\n        }\"\n      ></div>\n\n      <div id=\"gauge-label\">\n        <span v-if=\"appState.mode!=='target'\">EU 2050 Emissions</span>\n        <span v-if=\"appState.mode==='target'\">EU 2050 Budget in Gt CO<span class=\"sub\">2eq</span></span>\n      </div>\n\n      <div id=\"gauge-tick-mobile-container\"\n        :style=\"{\n          transform: 'translateX(calc('+euBudget*100/limitGHG +'% - 100%))',\n        }\"\n      >\n        <a id=\"gauge-tick-mobile\" :href=\"linkaddress\" class=\"wrapper-link\" ref=\"budgetToggle\"\n          v-on:touchmove=\"toggleBudgetView\"\n        >\n        </a>\n      </div>\n\n      <div id=\"gauge-value-mobile\" class=\"nowrap\">\n        <span v-if=\"appState.mode!=='target' && emissions2050\">{{Math.round(emissions2050)}} Gt</span>\n        <span v-if=\"appState.mode==='target'\">{{Math.round(euBudget)}} Gt</span>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as outputsService from '../outputsService.js';\nimport {BudgetShares, LimitGHG, Produced2018} from '../config/targetData.js';\n\nexport default {\n  name: 'EmissionsBarMobile',\n  props: ['appState'],\n  components: {\n  },\n  data() {\n    return {\n      emissions2050: undefined\n    }\n  },\n  created() {\n    this.limitGHG = LimitGHG;\n    this.produced2018 = Produced2018;\n    this.getEmissions2050();\n  },\n  methods: {\n    toggleBudgetView() {\n      this.$refs.budgetToggle.click();\n    },\n    getEmissions2050() {\n      // component is mounted before API response gets in\n\n      let cumEmissions = outputsService.outputs[\"clt_cum-emissions-CO2e[Mt]\"];\n\n      if(cumEmissions && cumEmissions.data && cumEmissions.data['EU']) {\n        let len = cumEmissions.data['EU'].length;\n        this.emissions2050 = cumEmissions.data['EU'][len-1]/1000;\n      }\n    }\n  },\n  computed: {\n    euBudget() {\n      return BudgetShares[this.appState.budgetFairness].shares['EU28+1'][this.appState.budgetTemperature.toFixed(1)];\n    },\n    linkaddress() {\n      if(this.appState.mode === 'target') {\n        return this.appState.mainScreenRouteString\n      }\n      if(this.appState.mode === 'main') {\n        return '/budget';\n      }\n      // default, just to be safe\n      return '/';\n    }\n  },\n  watch: {\n    'appState.lastAPIResponse': function() {\n       this.getEmissions2050();\n     }\n  }\n}\n</script>\n\n<style scoped>\n#bar-chart-mobile {\n  height: 20px;\n}\n\n#gauge-mobile {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0px 5px;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n#gauge-tick-mobile-container {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100%; /*necessary in order to be moved in 'parent'-percent*/\n  transition: transform 0.3s ease;\n}\n\n#gauge-tick-mobile {\n  position: absolute;\n  top: -3px;\n  right: 0px;\n  height: calc(100% + 3px);\n  width: 1px;\n  background-color: #80cc2b;\n}\n#gauge-tick-mobile::after {\n  content: '';\n  display: block;\n  position: absolute;\n  bottom: 100%;\n  left: -6px;\n  width: 13px;\n  height: 13px;\n  border-radius: 100%;\n  background-color: #80cc2b;\n}\n\n#gauge-label {\n  font-size: 14px;\n  font-weight: bold;\n}\n#gauge-label .sub {\n  font-size: 12px;\n  position: relative;\n  top: 1px;\n}\n\n#gauge-fill-mobile {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  height: 100%;\n  background-color: #666666;\n  background-color: rgba(0,0,0,0.4);\n  opacity: 1;\n  width: 100%;\n  transform-origin: left center;\n  transition: transform 0.3s ease;\n}\n\n#gauge-value-mobile {\n  font-weight: bold;\n  font-size: 14px;\n  opacity: 1;\n  transition: opacity 0.3s ease;\n  transition-delay: 0.5s;\n}\n\n</style>\n"]}]}