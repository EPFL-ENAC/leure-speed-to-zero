{"remainingRequest":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/src/components/EmissionsBar.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/src/components/EmissionsBar.vue","mtime":1707210098268},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/babel-loader/lib/index.js","mtime":1707234519797},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/cache-loader/dist/cjs.js","mtime":1707234519865},{"path":"/Users/paruta/2050-Calculators/PCalc/transition-pathway-explorer/node_modules/vue-loader/lib/index.js","mtime":1707234682968}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport * as outputsService from '../outputsService.js';\nimport {BudgetShares, LimitGHG, Produced2018} from '../config/targetData.js';\n\nexport default {\n  name: 'EmissionsBar',\n  props: ['appState'],\n  components: {\n  },\n  data() {\n    return {\n      emissions2050: undefined,\n      netZeroYear: outputsService.netZeroYear\n    }\n  },\n  created() {\n    this.limitGHG = LimitGHG;\n    this.produced2018 = Produced2018;\n    this.getEmissions2050();\n  },\n  methods: {\n    getEmissions2050() {\n      // component is mounted before API response gets in\n\n      let cumEmissions = outputsService.outputs[\"clt_cum-emissions-CO2e[Mt]\"];\n\n      if(cumEmissions && cumEmissions.data && cumEmissions.data['EU']) {\n        let len = cumEmissions.data['EU'].length;\n        this.emissions2050 = cumEmissions.data['EU'][len-1]/1000;\n      }\n    }\n  },\n  computed: {\n    euBudget() {\n      return BudgetShares[this.appState.budgetFairness].shares['EU28+1'][this.appState.budgetTemperature.toFixed(1)];\n    },\n    linkaddress() {\n      if(this.appState.mode === 'target') {\n        return this.appState.mainScreenRouteString\n      }\n      if(this.appState.mode === 'main') {\n        return '/budget';\n      }\n      //default, just to be safe\n      return '/';\n    }\n  },\n  watch: {\n    'appState.lastAPIResponse': function() {\n       this.getEmissions2050();\n     }\n  }\n}\n",{"version":3,"sources":["EmissionsBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EmissionsBar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <a id=\"bar-chart\" :href=\"linkaddress\" class=\"wrapper-link\"\n    :class=\"{'gauge-open': appState.mode==='target'}\"\n  >\n    <div id=\"gauge\">\n      <div id=\"gauge-budget\" class=\"gauge-fill\" :style=\"{width: euBudget*100/limitGHG+'%'}\">\n        <div id=\"gauge-flag\" class=\"nowrap tooltip-holder\">\n          <span>{{euBudget}} Gt</span>\n          <div class=\"tooltip tooltip-right\">\n            <span v-if=\"appState.mode==='target'\">\n              Start calculating\n            </span>\n            <span v-if=\"appState.mode==='main'\">\n              Try to meet your Parisian GHG budget (click to change)\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <!-- emissions bar is as long as budget-bar as long as emissions2050 are still undefined -->\n      <div id=\"gauge-current\" class=\"gauge-fill tooltip-holder\" :style=\"{width: emissions2050 ? emissions2050*100/limitGHG+'%' : euBudget*100/limitGHG+'%'}\">\n        <div id=\"gauge-value\" class=\"nowrap\" :class=\"{'gauge-visib': emissions2050}\">\n          <span v-if=\"emissions2050\">{{Math.round(emissions2050)}} Gt</span>\n          <span v-if=\"netZeroYear.value\" id=\"net-zero-in\">(Net zero by year {{netZeroYear.value}})</span>\n        </div>\n        <div class=\"tooltip tooltip-bottom\">\n          GHG emissions of your pathway until 2050 (Gt cumulative CO<sub>2,eq</sub>, EU27+2)\n        </div>\n      </div>\n    </div>\n  </a>\n</template>\n\n<script>\nimport * as outputsService from '../outputsService.js';\nimport {BudgetShares, LimitGHG, Produced2018} from '../config/targetData.js';\n\nexport default {\n  name: 'EmissionsBar',\n  props: ['appState'],\n  components: {\n  },\n  data() {\n    return {\n      emissions2050: undefined,\n      netZeroYear: outputsService.netZeroYear\n    }\n  },\n  created() {\n    this.limitGHG = LimitGHG;\n    this.produced2018 = Produced2018;\n    this.getEmissions2050();\n  },\n  methods: {\n    getEmissions2050() {\n      // component is mounted before API response gets in\n\n      let cumEmissions = outputsService.outputs[\"clt_cum-emissions-CO2e[Mt]\"];\n\n      if(cumEmissions && cumEmissions.data && cumEmissions.data['EU']) {\n        let len = cumEmissions.data['EU'].length;\n        this.emissions2050 = cumEmissions.data['EU'][len-1]/1000;\n      }\n    }\n  },\n  computed: {\n    euBudget() {\n      return BudgetShares[this.appState.budgetFairness].shares['EU28+1'][this.appState.budgetTemperature.toFixed(1)];\n    },\n    linkaddress() {\n      if(this.appState.mode === 'target') {\n        return this.appState.mainScreenRouteString\n      }\n      if(this.appState.mode === 'main') {\n        return '/budget';\n      }\n      //default, just to be safe\n      return '/';\n    }\n  },\n  watch: {\n    'appState.lastAPIResponse': function() {\n       this.getEmissions2050();\n     }\n  }\n}\n</script>\n\n<style>\n#bar-chart {\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n  align-items: center;\n  cursor: pointer;\n}\n\n#gauge {\n  position: relative;\n  width: 100%;\n  height: 18px;\n  display: flex;\n  align-items: center;\n}\n\n#gauge-field {\n  position: relative;\n  background-color: #dcdcdc;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.gauge-fill {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  height: 100%;\n  border-top-left-radius: 10px;\n}\n\n#gauge-budget {\n  background-color: rgba(91,190,249, 0.45);\n  transition: width 0.2s ease;\n  font-size: 14px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 1px;\n  position: absolute !important;\n  top: 0px;\n  left: 0px;\n  z-index: 1;\n}\n#gauge-budget > span {\n  color: #77c046;\n  font-weight: bold;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  transition-delay: 0.2s;\n}\n.gauge-open #gauge-budget {\n  background-color: #5bbef9;\n}\n.gauge-open #gauge-budget > span {\n  opacity: 1;\n}\n\n#gauge-flag {\n  position: absolute;\n  top: -29px;\n  width: 60px; /*needed when flag showing to the left*/\n  left: calc(100% - 60px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #80cc2b;\n  height: 19px;\n  border-top-left-radius: 4px;\n}\n#gauge-flag::before {\n  content: '';\n  position: absolute;\n  top: 4px;\n  right: 0px;\n  width: 1px;\n  height: 43px;\n  background-color: #80cc2b;\n}\n#gauge-flag span {\n  font-size: 15px;\n  font-weight: bold;\n  color: white;\n}\n\n#gauge-current {\n  position: relative;\n  background-color: #5bbef9;\n  transition: width 0.8s ease;\n  transition-delay: 0.3s;\n  opacity: 1;\n  width: 100%;\n  z-index: 1;\n}\n\n.gauge-open #gauge-current {\n  opacity: 0;\n  transition-delay: 0s;\n}\n\n#gauge-value {\n  position: absolute;\n  top: 0px;\n  left: calc(100% + 5px);\n  display: flex;\n  align-items: center;\n  font-weight: bold;\n  color: white;\n  font-size: 15px;\n  z-index: 2;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  transition-delay: 0.5s;\n}\n#gauge-value.gauge-visib {\n  opacity: 1;\n}\n\n#gauge-flag .tooltip {\n  white-space: nowrap;\n  background-color: #80cc2b;\n  color: white;\n}\n#gauge-flag .tooltip::after {\n  border-color: transparent #80cc2b transparent transparent;\n}\n\n#gauge-current .tooltip {\n  white-space: nowrap;\n  background-color: #5bbef9;\n  color: white;\n}\n#gauge-current .tooltip::after {\n  border-color: transparent transparent  #5bbef9 transparent;\n}\n\n#net-zero-in {\n  margin-left: 10px;\n}\n\n</style>\n"]}]}